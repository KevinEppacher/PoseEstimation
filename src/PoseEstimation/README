// Load Training Data
Function LoadTrainingData(imagePath)
    image = LoadImage(imagePath)
    keypoints, descriptors = DetectAndComputeFeatures(image)
    Return keypoints, descriptors

// Load 3D Coordinates
Function LoadXYZCoordinates(filePath)
    Initialize coordinatesMap
    Open file filePath
    For each line in file
        Parse index, x, y, z
        coordinatesMap[index] = (x, y, z)
    Return coordinatesMap

// Feature Detection and Description
Function DetectAndComputeFeatures(image)
    Convert image to grayscale if not already
    Initialize SIFT detector
    keypoints, descriptors = detector.detectAndCompute(image, None)
    Return keypoints, descriptors

// Feature Matching
Function MatchFeatures(descriptors1, descriptors2)
    Initialize matcher (e.g., BFMatcher)
    matches = matcher.match(descriptors1, descriptors2)
    Return matches

// Filter Matches
Function FilterMatches(matches)
    Initialize good_matches
    Determine max_dist from matches
    For each match in matches
        If match.distance < 0.3 * max_dist
            Add match to good_matches
    Return good_matches

// Estimate Pose
Function EstimatePose(matches, keypoints1, keypoints2, objectPointsMap)
    Initialize imagePoints, objectPoints
    For each match in matches
        imagePoints.append(keypoints2[match.trainIdx].pt)
        objectPoints.append(objectPointsMap[match.queryIdx])
    cameraPose = solvePnP(objectPoints, imagePoints, cameraMatrix, distCoeffs)
    Return cameraPose

// Main
trainingKeypoints, trainingDescriptors = LoadTrainingData("path_to_training_image")
objectPointsMap = LoadXYZCoordinates("path_to_xyz_csv")

For each frame in video
    keypoints, descriptors = DetectAndComputeFeatures(frame)
    matches = MatchFeatures(trainingDescriptors, descriptors)
    good_matches = FilterMatches(matches)
    cameraPose = EstimatePose(good_matches, trainingKeypoints, keypoints, objectPointsMap)
    If visualizing
        VisualizeMatches(frame, trainingImage, keypoints, trainingKeypoints, good_matches)
        Display cameraPose
